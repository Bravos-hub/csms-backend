# Security & Operations Guide

## ðŸ” Secrets Management

Do not store sensitive credentials in code or unencrypted configuration files.

### Recommended Strategy
1.  **Development**: Use `.env` files (gitignored).
2.  **Production**: Use a Secrets Manager (e.g., AWS Secrets Manager, HashiCorp Vault, or Docker Secrets).
3.  **Rotation**:
    *   **JWT Secrets**: Rorate keys every 90 days. Update `JWT_SECRET` in env and restart services.
    *   **Service Accounts**: Regenerate Client Secrets via Admin Portal annually.

### Secret Rotation Script (Draft)
```bash
# Rotate JWT Secret
openssl rand -base64 32 > new_jwt_secret.txt
# ... update env/vault ...
```

## ðŸ”Œ OCPP Secure Provisioning

### Security Profile 3 (TLS with Client Certificates)
To securely provision a new charging station:

1.  **Generate Certificate**:
    ```bash
    # Generate CSR on Charger (Ideal) or centralized
    openssl req -new -key station.key -out station.csr
    ```
2.  **Sign Certificate**:
    *   Sign the CSR with your CSMS CA (Certificate Authority).
    *   Return the signed certificate to the Station Operator.
3.  **Install on Charger**:
    *   Upload `station.crt` and `ca.crt` to the charger via USB or Config UI.
    *   Configure WebSocket URL: `wss://ocpp.evzonecharging.com/ocpp/{chargePointId}`
4.  **Authorization**:
    *   Charger connects via mTLS.
    *   Gateway validates certificate against trusted CA.

### Basic Auth (Profile 2)
If mTLS is not supported:
*   Use `wss://username:password@ocpp.evzonecharging.com/ocpp/{chargePointId}`
*   **Username**: Charge Point ID
*   **Password**: Strong, unique password generated by Admin Portal.
